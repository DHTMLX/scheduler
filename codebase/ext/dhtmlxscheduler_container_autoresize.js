/*

@license
dhtmlxScheduler v.5.3.9 Standard

To use dhtmlxScheduler in non-GPL projects (and get Pro version of the product), please obtain Commercial/Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxScheduler/#licensing or contact us at sales@dhtmlx.com

(c) XB Software Ltd.

*/
Scheduler.plugin(function(e){function t(){n=!1,e.callEvent("onAfterSchedulerResize",[]),n=!0}function i(){var e=document.createElement("div");e.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}e.config.container_autoresize=!0,e.config.month_day_min_height=90,e.config.min_grid_size=25,
e.config.min_map_size=400;var a=e._pre_render_events,n=!0,r=0,s=0;e._pre_render_events=function(t,i){if(!e.config.container_autoresize||!n)return a.apply(this,arguments);var o=this.xy.bar_height,d=this._colsS.heights,_=this._colsS.heights=[0,0,0,0,0,0,0],l=this._els.dhx_cal_data[0];if(t=this._table_view?this._pre_render_events_table(t,i):this._pre_render_events_line(t,i),this._table_view)if(i)this._colsS.heights=d;else{var h=l.firstChild;if(h.rows){for(var c=0;c<h.rows.length;c++){
if(++_[c]*o>this._colsS.height-this.xy.month_head_height){var u=h.rows[c].cells,g=this._colsS.height-this.xy.month_head_height;1*this.config.max_month_events!==this.config.max_month_events||_[c]<=this.config.max_month_events?g=_[c]*o:(this.config.max_month_events+1)*o>this._colsS.height-this.xy.month_head_height&&(g=(this.config.max_month_events+1)*o);for(var f=0;f<u.length;f++)u[f].childNodes[1].style.height=g+"px";_[c]=(_[c-1]||0)+u[0].offsetHeight}
_[c]=(_[c-1]||0)+h.rows[c].cells[0].offsetHeight}_.unshift(0),h.parentNode.offsetHeight<h.parentNode.scrollHeight&&h._h_fix}else if(t.length||"visible"!=this._els.dhx_multi_day[0].style.visibility||(_[0]=-1),t.length||-1==_[0]){var v=(h.parentNode.childNodes,(_[0]+1)*o+1);s!=v+1&&(this._obj.style.height=r-s+v-1+"px"),v+="px",l.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+parseInt(v,10)+"px",
l.style.height=this._obj.offsetHeight-parseInt(l.style.top,10)-(this.xy.margin_top||0)+"px";var m=this._els.dhx_multi_day[0];m.style.height=v,m.style.visibility=-1==_[0]?"hidden":"visible",m=this._els.dhx_multi_day[1],m.style.height=v,m.style.visibility=-1==_[0]?"hidden":"visible",m.className=_[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(_[0]+1)*o,_[0]=0}}return t};var o=["dhx_cal_navline","dhx_cal_header","dhx_multi_day","dhx_cal_data"],d=function(t){r=0
;for(var a=0;a<o.length;a++){var n=o[a],d=e._els[n]?e._els[n][0]:null,_=0;switch(n){case"dhx_cal_navline":case"dhx_cal_header":_=parseInt(d.style.height,10);break;case"dhx_multi_day":_=d?d.offsetHeight-1:0,s=_;break;case"dhx_cal_data":var l=e.getState().mode;if(_=d.childNodes[1]&&"month"!=l?d.childNodes[1].offsetHeight:Math.max(d.offsetHeight-1,d.scrollHeight),"month"==l){if(e.config.month_day_min_height&&!t){_=d.getElementsByTagName("tr").length*e.config.month_day_min_height}
t&&(d.style.height=_+"px")}else if("year"==l)_=190*e.config.year_y;else if("agenda"==l){if(_=0,d.childNodes&&d.childNodes.length)for(var h=0;h<d.childNodes.length;h++)_+=d.childNodes[h].offsetHeight;_+2<e.config.min_grid_size?_=e.config.min_grid_size:_+=2}else if("week_agenda"==l){for(var c,u,g=e.xy.week_agenda_scale_height+e.config.min_grid_size,f=0;f<d.childNodes.length;f++){u=d.childNodes[f];for(var h=0;h<u.childNodes.length;h++){
for(var v=0,m=u.childNodes[h].childNodes[1],p=0;p<m.childNodes.length;p++)v+=m.childNodes[p].offsetHeight;c=v+e.xy.week_agenda_scale_height,c=1!=f||2!=h&&3!=h?c:2*c,c>g&&(g=c)}}_=3*g}else if("map"==l){_=0;for(var x=d.querySelectorAll(".dhx_map_line"),h=0;h<x.length;h++)_+=x[h].offsetHeight;_+2<e.config.min_map_size?_=e.config.min_map_size:_+=2}else if(e._gridView)if(_=0,d.childNodes[1].childNodes[0].childNodes&&d.childNodes[1].childNodes[0].childNodes.length){
for(var x=d.childNodes[1].childNodes[0].childNodes[0].childNodes,h=0;h<x.length;h++)_+=x[h].offsetHeight;_+=2,_<e.config.min_grid_size&&(_=e.config.min_grid_size)}else _=e.config.min_grid_size;if(e.matrix&&e.matrix[l]){if(t)_+=0,d.style.height=_+"px";else{_=0;for(var b=e.matrix[l],y=b.y_unit,w=0;w<y.length;w++)_+=b._section_height[y[w].key];e.$container.clientWidth!=e.$container.scrollWidth&&(_+=i())}_-=1}("day"==l||"week"==l||e._props&&e._props[l])&&(_+=2)}_+=1,r+=_}e._obj.style.height=r+"px",
t||e.updateView()},_=function(){if(!e.config.container_autoresize||!n)return!0;var i=e.getState().mode;if(!i)return!0;var a=window.requestAnimationFrame||window.setTimeout,r=document.documentElement.scrollTop;a(function(){d()}),e.matrix&&e.matrix[i]||"month"==i?a(function(){d(!0),document.documentElement.scrollTop=r,t()},1):t()};e.attachEvent("onBeforeViewChange",function(){var t=e.config.container_autoresize;if(e.xy.$original_scroll_width||(e.xy.$original_scroll_width=e.xy.scroll_width),
e.xy.scroll_width=t?0:e.xy.$original_scroll_width,e.matrix)for(var i in e.matrix){var a=e.matrix[i];a.$original_section_autoheight||(a.$original_section_autoheight=a.section_autoheight),a.section_autoheight=!t&&a.$original_section_autoheight}return!0}),e.attachEvent("onViewChange",_),e.attachEvent("onXLE",_),e.attachEvent("onEventChanged",_),e.attachEvent("onEventCreated",_),e.attachEvent("onEventAdded",_),e.attachEvent("onEventDeleted",_),e.attachEvent("onAfterSchedulerResize",_),
e.attachEvent("onClearAll",_),e.attachEvent("onBeforeExpand",function(){return n=!1,!0}),e.attachEvent("onBeforeCollapse",function(){return n=!0,!0})});
//# sourceMappingURL=../sources/ext/dhtmlxscheduler_container_autoresize.js.map